<script>    $(document).ready(function () {        document.title = '<?php echo $titulo ?>';        $("#nome").select2({            theme: "bootstrap",            language: "pt-BR",            minimumInputLength: 1,            minimumResultsForSearch: 10,            placeholder: 'Escreva algo...',            ajax: {                url: '<?php echo site_url('inicio/exibirNome') ?>',                dataType: 'json',                delay: 250,                processResults: function (data) {                    return {                        results: data                    };                },                cache: true            }        });        $("#catProdadm").select2({            theme: "bootstrap",            language: "pt-BR",            minimumInputLength: 1,            minimumResultsForSearch: 10,            placeholder: 'Escreva algo...',            ajax: {                url: '<?php echo site_url('inicio/exibirCategoria') ?>',                dataType: 'json',                delay: 250,                processResults: function (data) {                    return {                        results: data                    };                },                cache: true            }        });    });    //qTip2    jQuery(function ($) {        $("#compra").mask("99/99/9999");        $("#validade").mask("99/99/9999");    });</script><style>    input{width: inherit;}    .bar{width: inherit;}    .consumir {        color: #fc724c;    }    .consumir:hover {        color: #fc724c;        text-decoration: none;        font-weight: bold;    }</style><div id="admProdmodal" class="modal fade in" role="dialog">    <div class="modal-dialog modal-lg">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal">&times;</button>                <h2 class="modal-title">Novo Produto (Administração)</h2>            </div>            <div class="clearfix modal-body container_forms">                <form id="admProdForm" action="<?php echo site_url('inicio/cadastraradm') ?>" method="post">                    <div class="col-md-12">                        <div class="col-md-6 group">                            <input type="text" name="nomeProdadm" id="nomeProdadm" required="required">                            <span class="highlight"></span>                            <span id="barcpf" class="bar"></span>                            <label class="label-input">Nome *</label>                        </div>                        <div class="col-md-6 group">                            <label style="color: #999; font-weight: normal; font-size:18px;">Categoria *</label>                            <select style="width: 70%" id="catProdadm" name="catProdadm">                            </select>                        </div>                    </div>                    <input id="acao" type="hidden" name="acao" value="cadastrar">                    <div class="col-md-10 col-md-offset-2" align="center">                        <button class="btn btn-default" data-dismiss="modal">Cancelar</button>                        <button id="limparadmProd" class="btn btn-default" type="reset">Limpar</button>                        <button id="saveadmProd" style="background: #fc724c; border-color: #e26644" class="btn btn-success" >                            <img alt="" width="20" height="20" src="<?php echo base_url() ?>assets/img/loadwhite.svg" id="loadingadmProd" style="display:none">                            <span id="enviaradmProd">Enviar</span>                        </button>                    </div>                </form>            </div>        </div>    </div></div><div id="cadastrarProduto" class="modal fade in" role="dialog">    <div class="modal-dialog modal-lg">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal">&times;</button>                <h2 class="modal-title">Novo Produto</h2>            </div>            <div class="clearfix modal-body container_forms">                <form id="produtoForm" action="<?php echo site_url('inicio/validar') ?>" method="post">                    <div class="col-md-12">                        <div class="col-md-6 group">                            <label style="color: #999; font-weight: normal; font-size:18px;">Nome *</label>                            <select style="width: 70%" id="nome" name="nome">                            </select>                        </div>                        <div class="col-md-6 group">                            <input type="number" min="1" name="quantidade" id="quantidade" required="required">                            <span class="highlight"></span>                            <span id="barcpf" class="bar"></span>                            <label class="label-input">Quantidade *</label>                        </div>                    </div>                    <div class="col-md-12">                        <div class="col-md-6 group">                                  <input id="compra" name="compra" type="text" required="required">                            <span class="highlight"></span>                            <span class="bar"></span>                            <label class="label-input">Data Compra</label>                        </div>                        <div class="col-md-6 group">                                  <input id="validade" name="validade" type="text" required="required">                            <span class="highlight"></span>                            <span class="bar"></span>                            <label class="label-input">Data Validade</label>                        </div>                    </div>                    <div class="col-md-10 col-md-offset-2" align="center">                        <button class="btn btn-default" data-dismiss="modal">Cancelar</button>                        <button id="limparCadastrar" class="btn btn-default" type="reset">Limpar</button>                        <button id="saveProduto" style="background: #fc724c; border-color: #e26644" class="btn btn-success" >                            <img alt="" width="20" height="20" src="<?php echo base_url() ?>assets/img/loadwhite.svg" id="loading" style="display:none">                            <span id="enviarProduto">Enviar</span>                        </button>                    </div>                </form>            </div>        </div>    </div></div><div id="excluirProduto" class="modal fade in" role="dialog">    <div class="modal-dialog modal-lg">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal">&times;</button>                <h2 class="modal-title">Você deseja realmente excluir este(s) produto(s)?</h2>            </div>            <div class="clearfix modal-body container_forms">                <form id="excluirForm" action="<?php echo site_url('inicio/excluir') ?>" method="post">                    <div class="col-md-12">                        <div id="nomeExcluir" class="col-md-6">                            <ul></ul>                        </div>                        <input id="excluirinput" type="hidden" name="registrosexcluir">                    </div>                    <input id="acao" type="hidden" name="acao" value="excluir">                    <div class="col-md-10 col-md-offset-2" align="center">                        <button class="btn btn-default" data-dismiss="modal">Cancelar</button>                        <button id="excluirProdutobtn" style="background: #fc4c4c; border-color: #e24444" class="btn btn-success" >                            <img alt="" width="20" height="20" src="<?php echo base_url() ?>assets/img/loadwhite.svg" id="loadingExcluir" style="display:none">                            <span id="excluirProdutospan">Excluir</span>                        </button>                    </div>                </form>            </div>        </div>    </div></div><div id="exibealert" style="z-index: 2; display: none; position:fixed; top:50px; right: 90px;" class="alert alert-dismissable fade in"></div><div id="tabelaregistros" class="table-responsive" style="z-index: 1; background: #F7F7F7">    <table id="registros" class="table table-hover" width="100%">        <thead>            <tr>                <th></th>                <th>#</th>                <th>Nome</th>                <th>Data Compra</th>                <th>Data Validade</th>                <th>Quantidade</th>                <th>Categoria</th>                <th>Venceu</th>            </tr>        </thead>        <tbody>        </tbody>    </table></div><div id="tabelareceitas" style="z-index: 1; background: #F7F7F7">    <h2>Receitas Disponíveis </h2>    <div class="table-responsive">        <table id="receitas" class="table table-hover" width="100%" cellspacing="0">            <thead>                <tr>                    <th>#</th>                    <th>Ilustração</th>                    <th>Nome</th>                    <th>Ingredientes</th>                    <th>Preparo (min)</th>                    <th>Porções</th>                    <th>Descrição</th>                </tr>            </thead>            <tbody>            </tbody>        </table>    </div></div><div id="validarModal" class="modal fade in" role="dialog">    <div class="modal-dialog modal-lg">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal">&times;</button>                <h2 class="modal-title">Erro ao submeter as informações</h2>            </div>            <div class="clearfix modal-body container_forms">                <div id="validarModalMsg"></div>            </div>        </div>    </div></div><div style="margin-top: 6.5%; z-index: 3">    <button id="cadastrarbtn" data-toggle="modal" data-target="#cadastrarProduto" type="button" style="background: #fc724c !important; outline: 0" class="btn btn-danger btn-circle shadow btn-lg"><i class="fa fa-plus"></i></button>    <button id="excluirbtn" type="button" style="background: #fc4c4c !important; outline: 0; margin-right: 6%" class="btn btn-danger btn-circle shadow btn-lg"><i class="fa fa-trash-o"></i></button></div><script>    $(function () {        registros();        receitas();        $('#cadastrarprodutobtn').click(function () {            $('#cadastrarmenu').modal('toggle');            $('#cadastrarProduto').modal('toggle');        });        $('#cadastrarcategoriabtn').click(function () {            $('#cadastrarmenu').modal('toggle');            $('#cadastrarCategoria').modal('toggle');        });        $('#admProdbtn').click(function () {            event.preventDefault();            $('#admProdmodal').modal('toggle');        });        //qTip2        $('.pull_left').qtip({// Grab some elements to apply the tooltip to            content: 'Ao clicar, você consome o produto, reduzindo sua quantidade.',            position: {                target: 'mouse', // Track the mouse as the positioning target                adjust: {x: 5, y: 5} // Offset it slightly from under the mouse            }        });    });    //permite apenas naturais no input quantidade    $("#quantidade").change(function () {        if ($(this).val() < 1) {            $(this).val(1);        }    });    function consumir(id) {        $.ajax({            type: 'ajax',            url: "<?php echo base_url(); ?>inicio/consumir/" + id,            async: true,            success: function () {                $('#registros').DataTable().ajax.reload();            },            error: function (response) {                console.log(response);            }        });    }    //exibir os produtos do usuário    function registros() {        $('#registros').DataTable({            "dom": '<"pull-left"f><"pull-right"l>tip',            //produto vencido            "rowCallback": function (row, data) {                if (data['validade'] === data['venceu']) {                    $(row).css("color", "red");                    $('td:eq(3)', row).html('<b>' + data['validade'] + ' - Produto vencido</b>');                }                if (data['quantidade'] <= 0) {                    $('td:eq(4)', row).html('<b>' + data['quantidade'] + '</b>');                    $('td:eq(4)', row).css("color", "#fc724c");                }                $('td:eq(1)', row).html(data['nomeprod'] + ' - <a class="consumir" onclick="consumir(' + data['id'] + ')" style="cursor: pointer;" id="' + data['id'] + '">Consumir</a>');            },            "language": {                "url": "<?php echo base_url() ?>vendors/datatables.net/traducao/pt_br.lang"            },            "ajax": {                "type": "ajax",                "url": "<?php echo base_url() ?>inicio/exibirTodos",                "dataSrc": function (json) {                    return json.data;                }            },            "columns": [                {"data": "id"},                {"data": "id_usuario"},                {"data": "nomeprod"},                {"data": "compra"},                {"data": "validade"},                {"data": "quantidade"},                {"data": "nomecat"},                {"data": "venceu"}            ],            'select': {                'style': 'multi'            },            "columnDefs": [                {"targets": [0], 'checkboxes': {'selectRow': true}},                {"targets": [1], "visible": false, "searchable": false},                {"targets": [7], "visible": false, "searchable": false}            ],            "order": [[2, "asc"]]        });    }    //exibir receitas (se disponível)    function receitas() {        $('#receitas').DataTable({            "dom": '<"pull-left"f><"pull-right"l>tip',            "rowCallback": function (row, data) {                $(row).css("cursor", "pointer");                $(row).hover(function () {                    $(this).css("opacity", "0.7");                }, function () {                    $(this).css("opacity", "1");                });                $(row).click(function () {                    window.open("http://www.google.com/search?q=" + data['nome']);                    $(this).attr('target', '_blank');                });            },            "language": {                "url": "<?php echo base_url() ?>vendors/datatables.net/traducao/pt_br.lang"            },            "ajax": {                "type": "ajax",                "url": "<?php echo base_url() ?>receitas/exibir",                "dataSrc": function (json) {                    return json.data;                }            },            "columns": [                {"data": "id"},                {"data": "imagem"},                {"data": "nome"},                {"data": "ingredientes"},                {"data": "tempodecozimento"},                {"data": "porcoes"},                {"data": "descricao"}            ],            "columnDefs": [                {                    "targets": [0], "visible": false, "searchable": false                },                {                    "targets": [1],                    "visible": true,                    "searchable": false,                    "data": "img",                    "render": function (imagem) {                        return '<img height="100px" width="130px" src="<?php echo base_url("assets/img/receitas/") ?>' + imagem + '"/>';                    }                }            ]        });    }    //nome dos produtos a serem excluídos no modal de exclusão    $('#excluirbtn').click(function () {        var rows_selected = $('#registros').DataTable().column(0).checkboxes.selected().join(",").split(",");        if (rows_selected[0] === "") {            $('#exibealert').addClass('alert-danger').html('<strong>Erro!</strong> Nenhum produto selecionado.').fadeTo(50, 1);            window.setTimeout(function () {                $("#exibealert").slideUp();                window.setTimeout(function () {                    $('#exibealert').removeClass('alert-danger').html('').fadeTo(50, 1);                }, 500);            }, 4000);        } else {            $('#excluirinput').val(rows_selected);            $.ajax({                type: 'ajax',                method: 'get',                url: '<?php echo site_url() ?>inicio/exibirExcluir',                data: $('#excluirForm').serialize(),                async: true,                success: function (response) {                    var dados = $.map(JSON.parse(response), function (el) {                        return el;                    });                    var i = 0;                    for (i = 0; i < dados.length; i++) {                        $('#nomeExcluir ul').append(                                $('<li style="list-style-type: none;">').append(                                $('<span>').append(dados[i]['nomeprod'])                                ));                    }                }            });            $('#registros').DataTable().ajax.reload();            $('#receitas').DataTable().ajax.reload();            $('#excluirProduto').modal('toggle');        }    });    $('#excluirProduto').on('hidden.bs.modal', function () {        $('#nomeExcluir ul').children("li").remove();    });</script><script type="text/javascript" src="<?php echo base_url(); ?>assets/js/inicio/cadastrarP.js"></script><script type="text/javascript" src="<?php echo base_url(); ?>assets/js/inicio/aposFecharValidacao.js"></script><script type="text/javascript" src="<?php echo base_url(); ?>assets/js/inicio/cadastrarPAdmin.js"></script><script type="text/javascript" src="<?php echo base_url(); ?>assets/js/inicio/limparFCad.js"></script><script type="text/javascript" src="<?php echo base_url(); ?>assets/js/inicio/limparFCadAdmin.js"></script><script type="text/javascript" src="<?php echo base_url(); ?>assets/js/inicio/excluir.js"></script><script type="text/javascript" src="<?php echo base_url(); ?>assets/js/inicio/resetForm.js"></script>